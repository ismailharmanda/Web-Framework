{"version":3,"sources":["src/models/Model.ts","src/models/User.ts","src/index.ts"],"names":[],"mappings":";;;;;;AEAA,IAAA,MAAA,GAAA,OAAA,CAAA,eAAA,CAAA;AFqBA,IAAA,KAAA;AEnBA,AFmBA,IEnBM,IAAI,GAAG,IAAI,MAAA,CAAA,IAAJ,CAAS;AAAE,AFmBxB,EEnBwB,EAAE,EAAE,CAAN,KFmBtB;AEnB+B,AFoB7B,EEpB6B,IAAI,EAAE,GFoBnC,KAAA,CACU,CErBU,SFoBpB,EAEU,MAFV,EAGU,IAHV,EAGuB;AEvBwB,AFqBrC,EErBqC,GAAG,EAAE,EFqB1C,UAAA,GAAA,UAAA;AErBU,AFsBV,CEtBC,CAAb,OFsBY,MAAA,GAAA,MAAA;AEpBZ,AFqBY,IErBR,CAAC,EAAL,CAAQ,CFqBI,IAAA,CErBZ,EAAgB,AFqBJ,IAAA,QErBI;AACd,AFqBI,EErBJ,OAAO,CAAC,GAAR,CAAY,IAAZ;AACD,CAFD;AAIA,AFmBE,EAAA,EEnBE,CAAC,GFmBH,CEnBF,AFmBE,cAAA,CAAI,KAAA,CAAA,SAAJ,EAAI,IAAJ,EAAM;SAAN,eAAA;AACE,aAAO,KAAK,MAAL,CAAY,EAAnB;AACD,KAFK;qBAAA;;AAAA,GAAN;AAGA,EAAA,MAAA,CAAA,cAAA,CAAI,KAAA,CAAA,SAAJ,EAAI,SAAJ,EAAW;SAAX,eAAA;AACE,aAAO,KAAK,MAAL,CAAY,OAAnB;AACD,KAFU;qBAAA;;AAAA,GAAX;AAGA,EAAA,MAAA,CAAA,cAAA,CAAI,KAAA,CAAA,SAAJ,EAAI,KAAJ,EAAO;SAAP,eAAA;AACE,aAAO,KAAK,UAAL,CAAgB,GAAvB;AACD,KAFM;qBAAA;ACjCT,IAAA,OAAA,GAAA,OAAA,CAAA,SAAA,CAAA;ADiCS,GAAP;ACzBF,IAAA,IAAA;AD6BE,AC7BF,ED6BE,KAAA,CAAA,SAAA,CAAA,GAAA,GAAA,UAAI,MAAJ,EAAa;AACX,AC9BJ,SD8BS,CC9BT,MAAA,EAAA,CD8BI,CAAgB,GAAhB,CAAoB,MAApB;AACA,AC/BsB,EAAA,OD+BjB,EC/BiB,CAAA,GD+BtB,CAAY,AC/BU,EAAA,KD+BtB,CAAoB,AC/BE,CAAA,OD+BtB;AACD,GAHD;AC7BF,WAAA,IAAA,GAAA;ADkCE,EAAA,KAAA,CAAA,SAAA,CAAA,KAAA,GAAA,YAAA;AAAA,AClC2C,QDkC3C,KAAA,GAAA,IAAA;;AACE,ACnCwC,QDmClC,CCnCkC,CDmChC,GAAG,ACnC6B,KDmCxB,GAAL,CAAS,IAAT,CAAX;ACnCJ,CAAA,CAA0B,OAAA,CAAA,KAA1B,CAAA;ADqCI,QAAI,OAAO,EAAP,KAAc,QAAlB,EAA4B;AAC1B,ACtCO,OAAA,CAAA,IDsCD,ACtCC,GAAA,CDsCG,GCtCH,EDsCD,CAAU,6BAAV,CAAN;AACD;;AAED,SAAK,IAAL,CAAU,KAAV,CAAgB,EAAhB,EAAoB,IAApB,CAAyB,UAAC,QAAD,EAAwB;AAC/C,MAAA,KAAI,CAAC,GAAL,CAAS,QAAQ,CAAC,IAAlB;AACD,KAFD;AAGD,GAVD;;AAYA,EAAA,KAAA,CAAA,SAAA,CAAA,IAAA,GAAA,YAAA;AAAA,QAAA,KAAA,GAAA,IAAA;;AACE,SAAK,IAAL,CACG,IADH,CACQ,KAAK,UAAL,CAAgB,MAAhB,EADR,EAEG,IAFH,CAEQ,UAAC,QAAD,EAAwB;AAC5B,MAAA,KAAI,CAAC,OAAL,CAAa,MAAb;AACD,KAJH,EAKG,KALH,CAKS,YAAA;AACL,MAAA,KAAI,CAAC,OAAL,CAAa,OAAb;AACD,KAPH;AAQD,GATD;;AAUF,SAAA,KAAA;AA3CA,CAAA,EAAA;;AAAa,OAAA,CAAA,KAAA,GAAA,KAAA","file":"src.f10117fe.js","sourceRoot":"..","sourcesContent":["import { AxiosPromise, AxiosResponse } from \"axios\";\r\n\r\ninterface ModelAttributes<T> {\r\n  set(update: T): void;\r\n  getAll(): T;\r\n  get<K extends keyof T>(key: K): T[K];\r\n}\r\n\r\ninterface Sync<T> {\r\n  fetch(id: number): AxiosPromise;\r\n  save(data: T): AxiosPromise;\r\n}\r\n\r\ninterface Events {\r\n  on(eventName: string, callback: () => void): void;\r\n  trigger(eventName: string): void;\r\n}\r\ninterface HasId {\r\n  id?: number;\r\n}\r\n\r\nexport class Model<T extends HasId> {\r\n  constructor(\r\n    private attributes: ModelAttributes<T>,\r\n    private events: Events,\r\n    private sync: Sync<T>\r\n  ) {}\r\n  get on() {\r\n    return this.events.on;\r\n  }\r\n  get trigger() {\r\n    return this.events.trigger;\r\n  }\r\n  get get() {\r\n    return this.attributes.get;\r\n  }\r\n\r\n  set(update: T): void {\r\n    this.attributes.set(update);\r\n    this.events.trigger(\"change\");\r\n  }\r\n\r\n  fetch(): void {\r\n    const id = this.get(\"id\");\r\n\r\n    if (typeof id !== \"number\") {\r\n      throw new Error(\"Can not fetch without an id\");\r\n    }\r\n\r\n    this.sync.fetch(id).then((response: AxiosResponse): void => {\r\n      this.set(response.data);\r\n    });\r\n  }\r\n\r\n  save(): void {\r\n    this.sync\r\n      .save(this.attributes.getAll())\r\n      .then((response: AxiosResponse): void => {\r\n        this.trigger(\"save\");\r\n      })\r\n      .catch(() => {\r\n        this.trigger(\"error\");\r\n      });\r\n  }\r\n}\r\n","import { Model } from \"./Model\";\r\n\r\nexport interface UserProps {\r\n  id?: number;\r\n  name?: string;\r\n  age?: number;\r\n}\r\n\r\nexport class User extends Model<UserProps> {}\r\n","import { User } from \"./models/User\";\r\n\r\nconst user = new User({ id: 5, name: \"new name\", age: 0 });\r\n\r\nuser.on(\"save\", () => {\r\n  console.log(user);\r\n});\r\n\r\nuser.save();\r\n"]}